# Eve ü§ñ (v2.0)

**Eve** is a modular, local-first **AI Personal Agent Platform**.
It aggregates your digital life (Email, Web) into a local brain, analyzes it with LLMs, and helps you take action.

> **Current Focus**: Job Hunting Copilot (Jarvis for Careers).

---

## üèó Architecture 2.0

Eve is built on a **Kernel + Modules** architecture:

1.  **Kernel (`src/index.ts`)**: The central nervous system.
    *   **Universal Inbox**: Aggregates signals from all sources (Gmail, etc.).
    *   **Dispatcher**: Routes signals to the correct Module.
    *   **AgentManager**: Orchestrates multiple AI sub-agents (Writer, Researcher).
    *   **ConfigManager**: Persisted configuration in SQLite.

2.  **Modules (`src/modules/*`)**: Independent capabilities.
    *   **Jobs Module**: The flagship module for recruitment intelligence.
        *   *Ingest*: Gmail -> Adapter (LinkedIn/Indeed) -> DB.
        *   *Enrich*: Firecrawl -> Web Page -> Markdown.
        *   *Analyze*: LLM + Resume -> Fit Score & Strategy.

3.  **Services (`src/services/*`)**:
    *   **LLM**: Provider-agnostic AI service (Anthropic, OpenAI, Volcengine/Ark).
    *   **Firecrawl**: Web scraping & markdown conversion.
    *   **Gmail**: Multi-account fetching & thread decoding.

---

## üöÄ Commands Reference

### 1. Global Commands
| Command | Description |
| :--- | :--- |
| `eve sync` | **Core Beat**. Fetches new emails from all accounts (Incremental). |
| `eve morning` | Generates a Daily Briefing (Report) from all modules. |
| `eve status` | Checks system health and loaded modules. |
| `eve models` | Lists available LLM model aliases. |
| `eve config:set` | Set a configuration key (JSON supported). |
| `eve config:get` | Get a configuration key. |

### 2. Job Module (`eve jobs:*`)
| Command | Description |
| :--- | :--- |
| `eve jobs:status` | **Dashboard**. Shows the funnel (Inbox -> Enriched -> Analyzed). |
| `eve jobs:list` | Lists recent jobs with status icons and **Gmail Links**. |
| `eve jobs:enrich` | Uses **Firecrawl** to scrape deep content from job URLs. |
| `eve jobs:analyze`| Uses **LLM** to match jobs against your Resume. |
| `eve jobs:resume` | `<path>` Import your Resume (PDF/MD) for analysis context. |

---

## ‚öôÔ∏è Configuration Guide

Eve stores config in `eve.db` (sys_config table).

### A. Essential Services
```bash
# 1. Google Accounts (Array of emails to scan via 'gog' CLI)
eve config:set services.google.accounts '["me@gmail.com", "linked@gmail.com"]'

# 2. LLM Provider (Anthropic / OpenAI / Ark)
eve config:set services.llm.base_url "https://ark.cn-beijing.volces.com/api/coding"
eve config:set services.llm.api_key "sk-..."
eve config:set services.llm.model "ark-code-latest"

# 3. Firecrawl (For Web Scraping)
eve config:set services.firecrawl.api_key "fc-..."
```

### B. Multi-Agent System (`agents.enabled`)
You can spawn specialized sub-agents by configuring this array:

```bash
eve config:set agents.enabled '[
  {
    "name": "researcher",
    "provider": "google",
    "model": "gemini-pro",
    "systemPrompt": "You are a deep researcher."
  },
  {
    "name": "writer",
    "provider": "anthropic",
    "model": "claude-opus"
  }
]'
```

---

## üõ† Development Guide

### Prerequisites
- **Bun** (v1.0+)
- **gog** CLI (installed and authenticated)
- **pdftotext** (for resume parsing)

### Setup
```bash
bun install
bun run src/index.ts init  # (Optional wizard)
```

### Data Flow (The "Hybrid Funnel")
1.  **Sync**: `GmailSource` fetches threads using `gog thread get`.
2.  **Extract**: `LinkedInAdapter` (Cheerio) extracts URLs from HTML body.
    *   *Fallback*: If no URL found, uses Subject line + Gmail Deep Link.
3.  **Enrich**: `FirecrawlService` visits the URL to get the real JD (Markdown).
    *   *Throttle*: 2s delay to respect rate limits.
4.  **Analyze**: `LLMService` compares JD (Markdown) vs Resume (Text).

### Troubleshooting
- **No Emails Found?**: Check `gog auth list`. Ensure `services.google.accounts` matches.
- **Firecrawl 429?**: You hit the rate limit. Wait a minute and retry `jobs:enrich`.
- **Links Missing?**: Check `debug_email.html` generated by debug scripts to inspect raw HTML.

---

**Eve Copilot** (Chrome Extension) is currently in design phase. See `Eve_Copilot_Architecture.md` in Obsidian.
